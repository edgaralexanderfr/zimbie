var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};define("AssetManager",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(){}return e.loadMap=function(e){e.load.json("assets","assets/assets.json")},e.load=function(e){var t,a=e.cache.getJSON("assets"),r=a.single,i=a.multiple;for(t=0;t<r.length;t++){var n=r[t];this.loadFile(e,n.type,n.name,n.uri)}for(t=0;t<i.length;t++){n=i[t];var o=void 0;for(o=1;o<=n.total;o++){var s=n.name+o,d=n.uri+o+n.extension;this.loadFile(e,n.type,s,d)}}e.load.start()},e.loadFile=function(e,t,a,r){switch(t){case"image":e.load.image(a,r);break;case"json":e.load.json(a,r)}},e}();t.default=a}),define("Terrain",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this._game=e}return Object.defineProperty(e.prototype,"game",{get:function(){return this._game},set:function(e){this._game=e},enumerable:!0,configurable:!0}),e.prototype.generate=function(){var e,t,a=this.game.cache.getJSON("data-game"),r=[];for(e=0;e<a.terrain.height;e++)for(r[e]=[],t=0;t<a.terrain.width;t++)r[e][t]="";for(var i=a.terrain.width*a.terrain.height,n=0,o=a.terrain.population;n<o.length;n++){var s=o[n],d=Math.floor(i*s.seed);do{var g=this.game.rnd.integerInRange(0,a.terrain.width-1);r[w=this.game.rnd.integerInRange(0,a.terrain.height-1)][g]=s.name,d--}while(0<d)}var c=Math.floor(i*a.terrain.dirt.seed),h=a.terrain.dirt.minWidth*a.terrain.dirt.minHeight,m=c;do{var u=this.game.rnd.integerInRange(a.terrain.dirt.minWidth,a.terrain.dirt.maxWidth),l=this.game.rnd.integerInRange(a.terrain.dirt.minHeight,a.terrain.dirt.maxHeight);g=this.game.rnd.integerInRange(0,a.terrain.width-u);for(e=w=this.game.rnd.integerInRange(0,a.terrain.height-l);e<w+l;e++)for(t=g;t<g+u;t++)"dirt"!=r[e][t]&&(r[e][t]="dirt",m--)}while(h<=m);var f=a.terrain.tileSize*a.terrain.width,p=a.terrain.tileSize*a.terrain.height,b=this.game.add.bitmapData(f,p);for(e=0;e<a.terrain.height;e++)for(t=0;t<a.terrain.width;t++){g=t*a.terrain.tileSize;var w=e*a.terrain.tileSize;switch(r[e][t]){case"dirt":var I=this.getNeighbors(r,t,e,"dirt");"dirt"!=I[3]&&"dirt"!=I[1]?b.context.drawImage(this.game.cache.getImage(a.terrain.dirt.assets[1]),g,w):"dirt"!=I[5]&&"dirt"!=I[1]?b.context.drawImage(this.game.cache.getImage(a.terrain.dirt.assets[2]),g,w):"dirt"!=I[3]&&"dirt"!=I[7]?b.context.drawImage(this.game.cache.getImage(a.terrain.dirt.assets[3]),g,w):"dirt"!=I[5]&&"dirt"!=I[7]?b.context.drawImage(this.game.cache.getImage(a.terrain.dirt.assets[4]),g,w):b.context.drawImage(this.game.cache.getImage(a.terrain.dirt.assets[0]),g,w);break;case"grass1":b.context.drawImage(this.game.cache.getImage(a.terrain.population[0].asset),g,w);break;case"rocks1":b.context.drawImage(this.game.cache.getImage(a.terrain.population[1].asset),g,w);break;case"grass2":b.context.drawImage(this.game.cache.getImage(a.terrain.population[2].asset),g,w);break;case"sticks1":b.context.drawImage(this.game.cache.getImage(a.terrain.population[3].asset),g,w);break;default:b.context.drawImage(this.game.cache.getImage(a.terrain.asset),g,w)}}this.game.world.setBounds(0,0,f,p),this.game.cache.addBitmapData("terrain",b),this.game.add.sprite(0,0,this.game.cache.getBitmapData("terrain"))},e.prototype.getNeighbors=function(e,t,a,r){void 0===r&&(r="");var i,n,o=[r,r,r,r,r,r,r,r,r],s=0;for(n=a-1;n<=a+1;n++)for(i=t-1;i<=t+1;i++)void 0!==e[n]&&void 0!==e[n][i]&&(o[s]=e[n][i]),s++;return o},e}();t.default=a}),define("main",["require","exports","AssetManager","Terrain"],function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=__importDefault(a),r=__importDefault(r);var i,n,o,s,d=new Phaser.Game(1350,650,Phaser.AUTO,"",{preload:function(){document.body.style.backgroundColor="black",a.default.loadMap(d)},create:function(){d.load.onLoadComplete.add(g),a.default.load(d),i=d.input.keyboard.addKey(Phaser.Keyboard.UP),n=d.input.keyboard.addKey(Phaser.Keyboard.DOWN),o=d.input.keyboard.addKey(Phaser.Keyboard.LEFT),s=d.input.keyboard.addKey(Phaser.Keyboard.RIGHT)},update:function(){i.isDown&&(d.camera.y-=8);n.isDown&&(d.camera.y+=8);o.isDown&&(d.camera.x-=8);s.isDown&&(d.camera.x+=8)}});function g(){new r.default(d).generate()}}),define("util/damage",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(t.util||(t.util={})).damage=function(e,t){return e*(1-t)}});